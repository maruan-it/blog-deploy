<%- include('../layout/header'); -%>

<div class="main">
  <div class="container">
    <div class="content add-post">
      <form method="POST" class="post-form">
        <% if (post.title) { %>
        <h2>Edit Post</h2>
        <% } else { %>
        <h2>Create Post</h2>
        <% } %>

        <div class="form-group">
          <label for="post-title">Title</label>
          <input
            type="text"
            id="post-title"
            name="title"
            value="<%= post.title %>"
          />
        </div>
        <div class="form-group">
          <label for="post-body">Text</label>
          <textarea id="post-body"><%= post.body %></textarea>
        </div>
        <input
          type="hidden"
          id="post-id"
          name="postId"
          value="<%= post.id %>"
        />
        <div id="fileinfo">
          <% post.uploads.forEach(function(upload){ %>
          <div class="img-container" id="<%= upload.id %>">
            <img src="/uploads<%= upload.path %>" alt="" />
          </div>
          <% }) %>

          <label for="file" class="custom-file-upload">
            <input type="file" name="file" id="file" required /> +
          </label>
        </div>
        <div class="buttons">
          <button class="save-button secondary-inverse">Save as draft</button>
          <button class="publish-button">Publish</button>
        </div>
      </form>
    </div>

    <%- include('../layout/sidebar'); -%>
  </div>
</div>

<%- include('../layout/footer'); -%>
